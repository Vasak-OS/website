<!DOCTYPE html>
<html lang="es"><head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <title>Vasak OS</title>
  <link rel="icon" href="https://os.vasak.net.ar/img/icon.svg" />

  
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Poppins:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,600;0,700;1,300;1,400;1,600;1,700&display=swap"
    rel="stylesheet" />





<link rel="stylesheet" href="https://os.vasak.net.ar/css/styles.min.169498735f2e7e89ec500ce0ca9ec863f391b31b1baddf636e2bf6b8244f2093.css" integrity="sha256-FpSYc18ufonsUAzgyp7IY/ORsxsbrd9jbiv2uCRPIJM=" crossorigin="anonymous" />









  <meta name="author" content="PatoJAD" />
  <meta content='@PatoJADOficial' name='twitter:site' />
  <meta content='@PatoJADOficial' name='twitter:creator' />
  <meta property="og:url" content="https://os.vasak.net.ar/docs/devs/vasak-desktop/architecture/" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Arquitectura General | vasak-desktop" />
  <meta property="og:image"
    content='/img/hero-fullscreen-bg.jpg' />
  <meta property="og:locale" content="es-ES" />
  <meta name="description"
    content="VisiÃ³n general de la arquitectura de Vasak Desktop y cÃ³mo se estructuran los componentes.
Â¿QuÃ© es Vasak Desktop?
Vasak Desktop NO es un entorno de escritorio completo (como GNOME o KDE). Es una interfaz de escritorio ligera que no cuenta con un WM propio pero que proporciona: Vasak OS un sistema operativo basado en Linux pensado para todos los usuarios"
    property="og:description" />

  <meta
    content=' Linux, GNU, LynxOS, Lynx, gnu, lynx, lynxos, arch, arch linux, distro, linux, systemd, nwjs, desktop, lynx desktop, web desktop, lsd, Vasak Group, vasak, vasak os,vasak destop'
    name='keywords' />

  
  <link rel="canonical" href="https://os.vasak.net.ar/docs/devs/vasak-desktop/architecture/" />

</head><body class="transition-all duration-400">
  <div class="fixed bg-gray-100 dark:bg-gray-700 top-0 bottom-0 left-0 right-0 -z-10">
  </div><header class="sticky top-0 bg-white dark:bg-gray-800 z-40 drop-shadow-xl m-2 mb-0 rounded-xl">
  <nav class="mx-auto flex items-center justify-between p-6 lg:px-8" aria-label="Global">
    <div class="flex lg:flex-1">
      <a href="https://os.vasak.net.ar/" class="-m-1.5">
        <span class="sr-only">VasakOS</span>
        <img class="h-10 w-auto" src="https://os.vasak.net.ar/img/logo.svg" alt="VasakOS" title="VasakOS" />
      </a>
    </div>
    <div class="flex lg:hidden">
      <button type="button" class="-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-gray-700" onclick="openMobileMenu()">
        <span class="sr-only">Open main menu</span>
        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
          aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
        </svg>
      </button>
    </div>
    <div class="hidden lg:flex lg:gap-x-12">
      
      <a href="https://os.vasak.net.ar/"  title="Inicio"
        class="text-lg font-semibold leading-6 text-gray-900 dark:text-white hover:text-vsk1">Inicio</a>
      
      <a href="https://os.vasak.net.ar/blog"  title="Blog"
        class="text-lg font-semibold leading-6 text-gray-900 dark:text-white hover:text-vsk1">Blog</a>
      
      <a href="https://os.vasak.net.ar/about"  title="Sobre"
        class="text-lg font-semibold leading-6 text-gray-900 dark:text-white hover:text-vsk1">Sobre</a>
      
      <a href="https://os.vasak.net.ar/downloads"  title="Descargas"
        class="text-lg font-semibold leading-6 text-gray-900 dark:text-white hover:text-vsk1">Descargas</a>
      
      <a href="https://os.vasak.net.ar/docs"  title="DocumentaciÃ³n"
        class="text-lg font-semibold leading-6 text-gray-900 dark:text-white hover:text-vsk1">DocumentaciÃ³n</a>
      
    </div>
    <div class="hidden lg:flex lg:flex-1 lg:justify-end"><a href="javascript:void(0)" onclick="toggleDarkmode()" id="toggletheme" class="text-lg font-semibold leading-6 text-gray-900 dark:text-white">
  <em class="fas fa-moon"></em>
</a></div>
  </nav>

</header>
<div class="lg:hidden" role="dialog" aria-modal="true">
  <div id="mobile-menu"
    class="fixed inset-y-0 right-0 z-50 w-full overflow-y-auto bg-white dark:bg-gray-900 px-6 py-6 sm:max-w-sm sm:ring-1 sm:ring-gray-900/10 hidden">
    <div class="flex items-center justify-between">
      <a href="https://os.vasak.net.ar/" class="-m-1.5">
        <span class="sr-only">VasakOS</span>
        <img class="h-10 w-auto" src="https://os.vasak.net.ar/img/logo.svg" alt="VasakOS" title="VasakOS" />
      </a>
      <button type="button" class="-m-2.5 rounded-md p-2.5 text-gray-700" onclick="closeMobileMenu()">
        <span class="sr-only">Close menu</span>
        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
          aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    <div class="mt-6 flow-root">
      <div class="-my-6 divide-y divide-gray-500/10">
        <div class="space-y-2 py-6">
          
          <a href="https://os.vasak.net.ar/" 
            title="Inicio"
            onclick="closeMobileMenu()"
            class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 dark:text-white hover:text-vsk1">Inicio</a>
          
          <a href="https://os.vasak.net.ar/blog" 
            title="Blog"
            onclick="closeMobileMenu()"
            class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 dark:text-white hover:text-vsk1">Blog</a>
          
          <a href="https://os.vasak.net.ar/about" 
            title="Sobre"
            onclick="closeMobileMenu()"
            class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 dark:text-white hover:text-vsk1">Sobre</a>
          
          <a href="https://os.vasak.net.ar/downloads" 
            title="Descargas"
            onclick="closeMobileMenu()"
            class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 dark:text-white hover:text-vsk1">Descargas</a>
          
          <a href="https://os.vasak.net.ar/docs" 
            title="DocumentaciÃ³n"
            onclick="closeMobileMenu()"
            class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 dark:text-white hover:text-vsk1">DocumentaciÃ³n</a>
          
        </div>
        <div class="py-6"><a href="javascript:void(0)" onclick="toggleDarkmode()" id="toggletheme" class="text-lg font-semibold leading-6 text-gray-900 dark:text-white">
  <em class="fas fa-moon"></em>
</a></div>
      </div>
    </div>
  </div>
</div>
<main class="px-6 py-8">
  
<nav class="breadcrumbs-container mb-6" aria-label="Breadcrumb">
    <ul class="flex flex-wrap items-center gap-0 text-ms">
        
        <li class="flex items-center">
            <a href="https://os.vasak.net.ar/"
                class="inline-flex items-center gap-1.5 px-3 py-2 rounded-xl transition-all duration-200 hover:text-vsk1"
                title="Go to home page">
                <i class="fa-solid fa-house text-sm"></i>
                <span class="hidden sm:inline">Home</span>
            </a>
        </li>

        
        
        
        
        

        
        
        
        <li class="flex items-center">
            <i class="fa-solid fa-chevron-right text-gray-400 dark:text-gray-600 mx-1"></i>
        </li>

        
        <li>
            

            
            
            
                
                    
                        
                    
                
            
                
            
                
            
                
            
                
            

            

            <a href="https://os.vasak.net.ar/docs/"
                class="inline-flex items-center gap-1.5 px-3 py-2 rounded-xl transition-all duration-200 hover:text-vsk1"
                title="Visit Docs">
                Docs
            </a>
        </li>
        
        
        
        
        <li class="flex items-center">
            <i class="fa-solid fa-chevron-right text-gray-400 dark:text-gray-600 mx-1"></i>
        </li>

        
        <li>
            

            
            
            
                
                    
                        
                    
                
            
                
                    
                        
                    
                
            
                
            
                
            
                
            

            

            <a href="https://os.vasak.net.ar/docs/devs/"
                class="inline-flex items-center gap-1.5 px-3 py-2 rounded-xl transition-all duration-200 hover:text-vsk1"
                title="Visit Devs">
                Devs
            </a>
        </li>
        
        
        
        
        <li class="flex items-center">
            <i class="fa-solid fa-chevron-right text-gray-400 dark:text-gray-600 mx-1"></i>
        </li>

        
        <li>
            

            
            
            
                
                    
                        
                    
                
            
                
                    
                        
                    
                
            
                
                    
                        
                    
                
            
                
            
                
            

            

            <a href="https://os.vasak.net.ar/docs/devs/vasak-desktop/"
                class="inline-flex items-center gap-1.5 px-3 py-2 rounded-xl transition-all duration-200 hover:text-vsk1"
                title="Visit Vasak desktop">
                Vasak desktop
            </a>
        </li>
        
        
        
        
        <li class="flex items-center">
            <i class="fa-solid fa-chevron-right text-gray-400 dark:text-gray-600 mx-1"></i>
        </li>

        
        <li>
            

            
            
            
                
                    
                        
                    
                
            
                
                    
                        
                    
                
            
                
                    
                        
                    
                
            
                
                    
                        
                    
                
            
                
            

            

            <a href="https://os.vasak.net.ar/docs/devs/vasak-desktop/architecture/"
                class="inline-flex items-center gap-1.5 px-3 py-2 rounded-xl transition-all duration-200 hover:text-vsk1"
                title="Visit Architecture">
                Architecture
            </a>
        </li>
        
        
        
        

        
        
        <li class="flex items-center">
            <svg class="w-4 h-4 text-gray-400 dark:text-gray-600 mx-1" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
        </li>

        <li class="flex items-center">
            <span class="inline-flex items-center gap-1.5 px-3 py-2 rounded-xl
                     bg-gradient-to-r from-vsk2 to-vsk1
                     text-white font-medium
                     shadow-md dark:shadow-lg" aria-current="page">
                
                
                <i class="fa-solid fa-book text-sm"></i>
                

                <span>Arquitectura General | vasak-desktop</span>
            </span>
        </li>
        
    </ol>
</nav>
  <div class="flex justify-between mx-auto">
    <div class="w-full lg:w-8/12">
      <div class="px-8">
        <div
          class="flex flex-col px-16 py-10 mx-auto bg-white dark:bg-gray-800 rounded-xl"
          id="article">
          <h1 class="text-center text-vsk1">Arquitectura General | vasak-desktop</h1>
          <p>VisiÃ³n general de la arquitectura de Vasak Desktop y cÃ³mo se estructuran los componentes.</p>
<h2 id="quÃ©-es-vasak-desktop">Â¿QuÃ© es Vasak Desktop?</h2>
<p>Vasak Desktop NO es un entorno de escritorio completo (como GNOME o KDE). Es una <strong>interfaz de escritorio ligera</strong> que no cuenta con un <strong>WM</strong> propio pero que proporciona:</p>
<ul>
<li><strong>Panel Superior</strong> - Barra de tareas con applets de sistema</li>
<li><strong>Vista de Escritorio</strong> - Fondo con widgets opcionales</li>
<li><strong>Control Center</strong> - Acceso rÃ¡pido a configuraciÃ³n</li>
<li><strong>MenÃº de Aplicaciones</strong> - BÃºsqueda y lanzamiento de apps</li>
<li><strong>File Manager</strong> - Herramienta para revisar archivos</li>
<li><strong>Search Launcher</strong> - Herramienta de busqueda rapida</li>
<li><strong>Config Manager</strong> - Herramienta de configuracion del sistema operativo</li>
</ul>
<p>Se ejecuta como varias ventanas de Tauri independientes que se comunican vÃ­a IPC.</p>
<blockquote>
<p>El resto de herramientas de VasakOS que no comparten el Backend con el desktop comparten una arquitectura similar y pueden integrarse de la misma manera con las configuraciones del desktop</p>
</blockquote>
<h2 id="arquitectura-de-alto-nivel">Arquitectura de Alto Nivel</h2>
<div class="mermaid flex justify-center">

graph TD
    User["ğŸ‘¤ USUARIO FINAL"]
    
    Panel["ğŸªŸ Ventana PANEL<br/>(Top Bar)"]
    Desktop["ğŸ–¥ï¸ Ventana DESKTOP<br/>(Background)"]
    
    Frontend["ğŸ¨ Frontend Vue.js<br/>(TypeScript + CSS)"]
    
    IPC["ğŸ”— IPC Tauri Bridge<br/>(Frontend â†” Backend)"]
    
    Backend["âš™ï¸ Backend Rust<br/>- Comandos de sistema<br/>- IntegraciÃ³n D-Bus<br/>- GestiÃ³n de ventanas"]
    
    DBus["ğŸ”Œ D-Bus<br/>(IPC)"]
    GTK["ğŸ­ GTK<br/>(Theme)"]
    System["ğŸ“ System<br/>(FS/IO)"]
    
    Services["ğŸ”§ Servicios del Sistema<br/>(PulseAudio, NetworkManager,<br/>BlueZ, MPRIS, gsettings...)"]
    
    User --> Panel
    User --> Desktop
    Panel --> Frontend
    Desktop --> Frontend
    Frontend --> IPC
    IPC --> Backend
    Backend --> DBus
    Backend --> GTK
    Backend --> System
    DBus --> Services
    
    style User fill:#e1f5ff
    style Panel fill:#fff3e0
    style Desktop fill:#fff3e0
    style Frontend fill:#f3e5f5
    style IPC fill:#ffe0b2
    style Backend fill:#c8e6c9
    style DBus fill:#ffccbc
    style GTK fill:#ffccbc
    style System fill:#ffccbc
    style Services fill:#b3e5fc

</div>

<h2 id="ventanas-de-la-aplicaciÃ³n">Ventanas de la AplicaciÃ³n</h2>
<p>Vasak Desktop se compone de <strong>2 ventanas independientes</strong>:</p>
<h3 id="ventana-1-panel-top-bar">Ventana 1: Panel (Top Bar)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;label&#34;</span><span class="p">:</span> <span class="s2">&#34;panel&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;Vasak Panel&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;width&#34;</span><span class="p">:</span> <span class="p">[</span><span class="err">ancho</span> <span class="err">de</span> <span class="err">pantalla</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;height&#34;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;y&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;decorations&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;alwaysOnTop&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Muestra:</p>
<ul>
<li>MenÃº de aplicaciones</li>
<li>Widgets (reloj, mÃºsica)</li>
<li>Applets de sistema (audio, red, bluetooth, baterÃ­a)</li>
<li>Control center</li>
</ul>
<h3 id="ventana-2-desktop-background">Ventana 2: Desktop (Background)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;label&#34;</span><span class="p">:</span> <span class="s2">&#34;desktop&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;Vasak Desktop&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;fullscreen&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;decorations&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;alwaysOnBottom&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;skipTaskbar&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Muestra:</p>
<ul>
<li>Fondo de escritorio</li>
<li>Widgets opcionales (clima, reloj)</li>
</ul>
<h2 id="capas-de-la-aplicaciÃ³n">Capas de la AplicaciÃ³n</h2>
<h3 id="1-capa-de-presentaciÃ³n-frontend">1. Capa de PresentaciÃ³n (Frontend)</h3>
<p><strong>TecnologÃ­a</strong>: Vue.js 3.5.18, TypeScript, Tailwind CSS 4.1</p>
<div class="mermaid flex justify-center">

graph LR
    Frontend["ğŸ¨ Frontend Vue.js<br/><small>src/</small>"]
    
    Frontend --> App["ğŸ“„ App.vue<br/><small>Componente raÃ­z</small>"]
    Frontend --> Main["ğŸ“„ main.ts<br/><small>Entry point</small>"]
    Frontend --> Style["ğŸ“„ style.css<br/><small>Estilos globales</small>"]
    
    Frontend --> Views["ğŸ“ views/<br/><small>PÃ¡ginas principales</small>"]
    Frontend --> Components["ğŸ“ components/<br/><small>Componentes reutilizables</small>"]
    Frontend --> Routes["ğŸ“ routes/<br/><small>ConfiguraciÃ³n de rutas</small>"]
    Frontend --> Tools["ğŸ“ tools/<br/><small>Controllers</small>"]
    
    Views --> ViewPanel["ğŸ“„ PanelView.vue<br/><small>Ventana panel superior</small>"]
    Views --> ViewDesktop["ğŸ“„ DesktopView.vue<br/><small>Ventana fondo escritorio</small>"]
    Views --> ViewMenu["ğŸ“„ MenuView.vue<br/><small>Vista del menÃº de apps</small>"]
    Views --> ViewCC["ğŸ“„ ControlCenterView.vue<br/><small>Centro de control</small>"]
    
    Components --> CompBtns["ğŸ“ buttons/<br/><small>Botones de interfaz</small>"]
    Components --> CompCards["ğŸ“ cards/<br/><small>Tarjetas de informaciÃ³n</small>"]
    Components --> CompCtrl["ğŸ“ controls/<br/><small>Controles interactivos</small>"]
    Components --> CompAreas["ğŸ“ areas/<br/><small>Ãreas completas</small>"]
    
    CompAreas --> AreaPanel["ğŸ“ panel/"]
    CompAreas --> AreaCC["ğŸ“ control-center/"]
    CompAreas --> AreaMenu["ğŸ“ menu/"]
    
    Tools --> ToolBat["ğŸ“„ battery.controller.ts"]
    Tools --> ToolNet["ğŸ“„ network.controller.ts"]
    Tools --> ToolBT["ğŸ“„ bluetooth.controller.ts"]
    Tools --> ToolTray["ğŸ“„ tray.controller.ts"]
    
    Routes --> RouteIdx["ğŸ“„ index.ts"]
    
    style Frontend fill:#667eea,stroke:#764ba2,color:#fff
    style App fill:#f3e5f5,stroke:#ce93d8,color:#000
    style Views fill:#4facfe,stroke:#00f2fe,color:#fff
    style Components fill:#43e97b,stroke:#38f9d7,color:#fff
    style Routes fill:#feca57,stroke:#ff9a56,color:#fff
    style Tools fill:#fa709a,stroke:#f5576c,color:#fff
    style ViewPanel fill:#f3e5f5,stroke:#ce93d8,color:#000
    style ViewDesktop fill:#f3e5f5,stroke:#ce93d8,color:#000
    style ViewMenu fill:#f3e5f5,stroke:#ce93d8,color:#000
    style ViewCC fill:#f3e5f5,stroke:#ce93d8,color:#000

</div>

<p><strong>Flujo de Datos</strong>:</p>
<ul>
<li>Componentes â†’ <code>invoke('command')</code> â†’ Backend</li>
<li>Backend â†’ <code>emit('event')</code> â†’ Componentes actualizan</li>
</ul>
<h3 id="2-capa-de-comunicaciÃ³n-ipc">2. Capa de ComunicaciÃ³n (IPC)</h3>
<p><strong>TecnologÃ­a</strong>: Tauri IPC Bridge</p>
<div class="mermaid flex justify-center">

sequenceDiagram
    participant VueComp as Vue<br/>Component
    participant Invoke as invoke()
    participant IPCBridge as IPC Bridge
    participant BackendCmd as Backend<br/>Command
    participant DBusService as D-Bus /<br/>System Call
    participant Result as Resultado
    
    VueComp->>Invoke: invoke('get_audio_volume')
    activate Invoke
    Invoke->>IPCBridge: envÃ­a comando serializado
    deactivate Invoke
    
    activate IPCBridge
    IPCBridge->>BackendCmd: #64 (Backend Handler)
    deactivate IPCBridge
    
    activate BackendCmd
    BackendCmd->>DBusService: consulta D-Bus / llamada sistema
    deactivate BackendCmd
    
    activate DBusService
    DBusService->>Result: obtiene valor (ej: 50%)
    deactivate DBusService
    
    activate Result
    Result->>IPCBridge: retorna respuesta
    deactivate Result
    
    activate IPCBridge
    IPCBridge->>VueComp: resolve Promise con resultado
    deactivate IPCBridge
    
    activate VueComp
    VueComp->>VueComp: actualiza estado local
    deactivate VueComp
    
    Note over VueComp,Result: Solo comandos explÃ­citamente registrados pueden ser invocados

</div>

<p><strong>Seguridad</strong>: Solo comandos explÃ­citamente registrados pueden ser invocados.</p>
<h3 id="3-capa-de-lÃ³gica-backend">3. Capa de LÃ³gica (Backend)</h3>
<p><strong>TecnologÃ­a</strong>: Rust 1.70+, Tauri 2.x</p>
<div class="mermaid flex justify-center">

graph LR
    Backend["âš™ï¸ Backend Rust<br/><small>src-tauri/src/</small>"]
    
    Backend --> Main["ğŸ“„ main.rs<br/><small>Punto de entrada<br/>setup de ventanas</small>"]
    Backend --> Lib["ğŸ“„ lib.rs<br/><small>Registro de comandos<br/>y mÃ³dulos</small>"]
    Backend --> Structs["ğŸ“„ structs.rs<br/><small>Estructuras compartidas</small>"]
    
    Backend --> Commands["ğŸ“ commands/<br/><small>Manejadores IPC</small>"]
    Backend --> WindowMgr["ğŸ“ window_manager/<br/><small>GestiÃ³n de ventanas</small>"]
    Backend --> MonitorMgr["ğŸ“„ monitor_manager.rs<br/><small>GestiÃ³n de monitores</small>"]
    Backend --> DBusService["ğŸ“„ dbus_service.rs<br/><small>IntegraciÃ³n D-Bus</small>"]
    Backend --> Tray["ğŸ“ tray/<br/><small>Bandeja del sistema</small>"]
    Backend --> Utils["ğŸ“ utils/<br/><small>Funciones de utilidad</small>"]
    
    Commands --> AudioCmd["ğŸ“„ audio.rs<br/><small>Control de audio</small>"]
    Commands --> BluetoothCmd["ğŸ“„ bluetooth.rs<br/><small>Control bluetooth</small>"]
    Commands --> NetworkCmd["ğŸ“„ network.rs<br/><small>Control de red</small>"]
    Commands --> BrightnessCmd["ğŸ“„ brightness.rs<br/><small>Control de brillo</small>"]
    Commands --> NotificationsCmd["ğŸ“„ notifications.rs<br/><small>Sistema de notificaciones</small>"]
    Commands --> ShortcutsCmd["ğŸ“„ shortcuts.rs<br/><small>GestiÃ³n de atajos</small>"]
    Commands --> SearchCmd["ğŸ“„ search.rs<br/><small>BÃºsqueda de apps</small>"]
    Commands --> SystemConfigCmd["ğŸ“„ system_config.rs<br/><small>ConfiguraciÃ³n del SO</small>"]
    Commands --> ThemeCmd["ğŸ“„ theme.rs<br/><small>Temas GTK, iconos</small>"]
    Commands --> SessionCmd["ğŸ“„ session.rs<br/><small>Logout, shutdown, suspend</small>"]
    
    WindowMgr --> WinMod["ğŸ“„ window_controller.rs"]
    
    Utils --> UtilShortcuts["ğŸ“ shortcuts/"]
    Utils --> UtilSearch["ğŸ“ search/"]
    
    style Backend fill:#667eea,stroke:#764ba2,color:#fff
    style Main fill:#4facfe,stroke:#00f2fe,color:#fff
    style Lib fill:#4facfe,stroke:#00f2fe,color:#fff
    style Structs fill:#4facfe,stroke:#00f2fe,color:#fff
    style Commands fill:#feca57,stroke:#ff9a56,color:#fff
    style WindowMgr fill:#43e97b,stroke:#38f9d7,color:#fff
    style MonitorMgr fill:#43e97b,stroke:#38f9d7,color:#fff
    style DBusService fill:#f093fb,stroke:#f5576c,color:#fff
    style Tray fill:#fa709a,stroke:#f5576c,color:#fff
    style Utils fill:#4facfe,stroke:#00f2fe,color:#fff
    style AudioCmd fill:#43e97b,stroke:#38f9d7,color:#fff
    style BluetoothCmd fill:#f093fb,stroke:#f5576c,color:#fff
    style NetworkCmd fill:#fa709a,stroke:#f5576c,color:#fff
    style BrightnessCmd fill:#feca57,stroke:#ff9a56,color:#fff
    style NotificationsCmd fill:#43e97b,stroke:#38f9d7,color:#fff
    style ShortcutsCmd fill:#feca57,stroke:#ff9a56,color:#fff
    style SearchCmd fill:#feca57,stroke:#ff9a56,color:#fff
    style SystemConfigCmd fill:#4facfe,stroke:#00f2fe,color:#fff
    style ThemeCmd fill:#feca57,stroke:#ff9a56,color:#fff
    style SessionCmd fill:#f093fb,stroke:#f5576c,color:#fff

</div>

<p><strong>Responsabilidades del Backend</strong>:</p>
<ul>
<li>Ejecutar comandos del sistema vÃ­a shell o APIs nativas</li>
<li>Comunicar con servicios del sistema vÃ­a D-Bus</li>
<li>Gestionar eventos de hardware y notificaciones</li>
<li>Aplicar configuraciÃ³n del sistema (gsettings, archivos de config)</li>
<li>Manejar las ventanas de Tauri</li>
</ul>
<h3 id="4-capa-de-integraciÃ³n-del-sistema-d-bus">4. Capa de IntegraciÃ³n del Sistema (D-Bus)</h3>
<p><strong>TecnologÃ­a</strong>: Zbus (Rust) + D-Bus</p>
<p>Interfaz estÃ¡ndar de Linux para:</p>
<ul>
<li>Control de audio (PulseAudio/PipeWire)</li>
<li>Bluetooth (BlueZ)</li>
<li>Red (NetworkManager)</li>
<li>Notificaciones (Freedesktop)</li>
<li>EnergÃ­a (UPower)</li>
</ul>
<p>Ver <a href="dbus.md" >
  
  D-Bus
</a> para mÃ¡s detalles.</p>
<h3 id="5-capa-de-hardwareso">5. Capa de Hardware/SO</h3>
<p><strong>Componentes del Sistema</strong>:</p>
<ul>
<li>PulseAudio / PipeWire (Audio)</li>
<li>BlueZ (Bluetooth)</li>
<li>NetworkManager (Red)</li>
<li>X11 / Wayland (Ventanas)</li>
<li>Compositor (Efectos visuales)</li>
</ul>
<blockquote>
<p>El soporte actual sobre Wayland es <strong>EXPERIMENTAL</strong></p>
</blockquote>
<h2 id="flujo-de-datos-tÃ­pico">Flujo de Datos TÃ­pico</h2>
<h3 id="ejemplo-cambiar-volumen">Ejemplo: Cambiar Volumen</h3>
<div class="mermaid flex justify-center">

sequenceDiagram
    participant Usuario
    participant VueComponent as Vue Component
    participant PiniaStore as Pinia Store
    participant BackendHandler as Backend Handler
    participant IPCBridge as IPC Bridge
    participant BackendRust as Backend Rust
    participant SystemOS as Sistema OS
    participant DBusEvent as D-Bus Event
    
    Usuario->>VueComponent: Mueve slider de volumen
    activate VueComponent
    VueComponent->>PiniaStore: emit('volume-changed', newValue)
    activate PiniaStore
    PiniaStore->>PiniaStore: actualiza estado local
    deactivate PiniaStore
    
    VueComponent->>BackendHandler: invoke('set_audio_volume', {level: 50})
    deactivate VueComponent
    
    activate BackendHandler
    BackendHandler->>IPCBridge: envÃ­a comando
    deactivate BackendHandler
    
    activate IPCBridge
    IPCBridge->>BackendRust: ejecuta set_audio_volume
    deactivate IPCBridge
    
    activate BackendRust
    BackendRust->>SystemOS: pactl set-sink-volume @DEFAULT_SINK@ 50%
    activate SystemOS
    SystemOS->>SystemOS: Cambia volumen real
    deactivate SystemOS
    
    SystemOS->>DBusEvent: Emite evento de cambio
    activate DBusEvent
    DBusEvent->>BackendRust: Recibe confirmaciÃ³n
    deactivate DBusEvent
    deactivate BackendRust
    
    BackendRust->>VueComponent: event('audio_volume_changed', newValue)
    activate VueComponent
    VueComponent->>Usuario: Refleja el cambio visual
    deactivate VueComponent

</div>

<h2 id="estructura-de-directorios">Estructura de Directorios</h2>
<h3 id="frontend-src">Frontend (<code>src/</code>)</h3>
<div class="mermaid flex justify-center">

graph LR
    Src["ğŸ“ src/<br/><small>Frontend Vue.js</small>"]
    Src --> AppVue["ğŸ“„ App.vue<br/><small>Componente raÃ­z</small>"]
    Src --> MainTs["ğŸ“„ main.ts<br/><small>Entry point</small>"]
    Src --> StyleCss["ğŸ“„ style.css<br/><small>Estilos globales</small>"]
    Src --> VieDts["ğŸ“„ vite-env.d.ts<br/><small>Tipos Vite</small>"]
    Src --> Assets["ğŸ“ assets/<br/><small>Recursos estÃ¡ticos</small>"]
    Src --> Components["ğŸ“ components/<br/><small>Reutilizables</small>"]
    Src --> Interfaces["ğŸ“ interfaces/<br/><small>Tipos TypeScript</small>"]
    Src --> Layouts["ğŸ“ layouts/<br/><small>Plantillas</small>"]
    Src --> Routes["ğŸ“ routes/<br/><small>Enrutamiento</small>"]
    Src --> Tools["ğŸ“ tools/<br/><small>Controladores</small>"]
    Src --> Types["ğŸ“ types/<br/><small>Definiciones</small>"]
    Src --> Views["ğŸ“ views/<br/><small>PÃ¡ginas principales</small>"]
    
    Assets --> AssetsImg["ğŸ“ img/"]
    Assets --> AssetsVec["ğŸ“ vectors/"]
    
    Components --> CompMenu["ğŸ“„ SearchMenuComponent.vue"]
    Components --> CompAreas["ğŸ“ areas/"]
    Components --> CompBtns["ğŸ“ buttons/"]
    Components --> CompCards["ğŸ“ cards/"]
    Components --> CompCtrl["ğŸ“ controls/"]
    Components --> CompIcon["ğŸ“ icon/"]
    Components --> CompWdg["ğŸ“ widgets/"]
    
    CompAreas --> AreaPanel["ğŸ“ panel/"]
    CompAreas --> AreaCC["ğŸ“ control-center/"]
    CompAreas --> AreaMenu["ğŸ“ menu/"]
    
    Interfaces --> IfBat["ğŸ“„ battery.ts"]
    Interfaces --> IfNot["ğŸ“„ notifications.ts"]
    Interfaces --> IfTray["ğŸ“„ tray.ts"]
    
    Layouts --> LayConfig["ğŸ“„ ConfigAppLayout.vue"]
    Routes --> RouteIdx["ğŸ“„ index.ts"]
    
    Tools --> ToolBat["ğŸ“„ battery.controller.ts"]
    Tools --> ToolBT["ğŸ“„ bluetooth.controller.ts"]
    Tools --> ToolNet["ğŸ“„ network.controller.ts"]
    Tools --> ToolTray["ğŸ“„ tray.controller.ts"]
    
    Types --> TypeVue["ğŸ“„ vue-libvasak.d.ts"]
    
    Views --> ViewCC["ğŸ“„ ControlCenterView.vue"]
    Views --> ViewDsk["ğŸ“„ DesktopView.vue"]
    Views --> ViewMnu["ğŸ“„ MenuView.vue"]
    Views --> ViewPnl["ğŸ“„ PanelView.vue"]
    Views --> ViewApp["ğŸ“ applets/"]
    Views --> ViewApps["ğŸ“ apps/"]
    
    style Src fill:#667eea,stroke:#764ba2,color:#fff
    style Components fill:#4facfe,stroke:#00f2fe,color:#fff
    style Assets fill:#4facfe,stroke:#00f2fe,color:#fff
    style Interfaces fill:#43e97b,stroke:#38f9d7,color:#fff
    style Layouts fill:#43e97b,stroke:#38f9d7,color:#fff
    style Routes fill:#43e97b,stroke:#38f9d7,color:#fff
    style Tools fill:#feca57,stroke:#ff9a56,color:#fff
    style Types fill:#fa709a,stroke:#f5576c,color:#fff
    style Views fill:#f093fb,stroke:#f5576c,color:#fff

</div>

<h3 id="backend-src-taurisrc">Backend (<code>src-tauri/src/</code>)</h3>
<div class="mermaid flex justify-center">

graph LR
    SrcTauri["ğŸ“ src-tauri/src/<br/><small>Backend Rust</small>"]
    SrcTauri --> LibRs["ğŸ“„ lib.rs<br/><small>MÃ³dulos principales</small>"]
    SrcTauri --> MainRs["ğŸ“„ main.rs<br/><small>Entry point</small>"]
    SrcTauri --> ErrorRs["ğŸ“„ error.rs<br/><small>Manejo de errores</small>"]
    SrcTauri --> StructRs["ğŸ“„ structs.rs<br/><small>Estructuras compartidas</small>"]
    SrcTauri --> ConstRs["ğŸ“„ constants.rs<br/><small>Constantes</small>"]
    SrcTauri --> Commands["ğŸ“ commands/<br/><small>Comandos IPC</small>"]
    SrcTauri --> WinMgr["ğŸ“ window_manager/<br/><small>GestiÃ³n de ventanas</small>"]
    SrcTauri --> AudioRs["ğŸ“„ audio.rs<br/><small>Control de audio</small>"]
    SrcTauri --> BrightRs["ğŸ“„ brightness.rs<br/><small>Control de brillo</small>"]
    SrcTauri --> BTRs["ğŸ“„ bluetooth.rs<br/><small>Bluetooth control</small>"]
    SrcTauri --> NetRs["ğŸ“„ network.rs<br/><small>Network control</small>"]
    SrcTauri --> NotifRs["ğŸ“„ notifications.rs<br/><small>Sistema notificaciones</small>"]
    SrcTauri --> DBusRs["ğŸ“„ dbus_service.rs<br/><small>D-Bus integration</small>"]
    SrcTauri --> EventsRs["ğŸ“„ eventloops.rs<br/><small>Bucles de eventos</small>"]
    SrcTauri --> ShortcutsRs["ğŸ“„ platform_shortcuts.rs<br/><small>Atajos de teclado</small>"]
    SrcTauri --> MenuRs["ğŸ“„ menu_manager.rs<br/><small>GestiÃ³n de menÃºs</small>"]
    SrcTauri --> Tray["ğŸ“ tray/<br/><small>Bandeja del sistema</small>"]
    SrcTauri --> Applets["ğŸ“ applets/<br/><small>Mini-aplicaciones</small>"]
    SrcTauri --> Utils["ğŸ“ utils/<br/><small>Funciones de utilidad</small>"]
    SrcTauri --> WinApps["ğŸ“ windows_apps/<br/><small>Manejo de aplicaciones</small>"]
    
    Commands --> AudioCmd["ğŸ“„ audio_commands.rs"]
    Commands --> BTCmd["ğŸ“„ bluetooth_commands.rs"]
    Commands --> NetCmd["ğŸ“„ network_commands.rs"]
    
    WinMgr --> ModWin["ğŸ“„ mod.rs"]
    WinMgr --> WinCtrl["ğŸ“„ window_controller.rs"]
    WinMgr --> MonMgr["ğŸ“„ monitor_handler.rs"]
    
    Tray --> ModTray["ğŸ“„ mod.rs"]
    Tray --> TrayIcon["ğŸ“„ tray_icon.rs"]
    
    style SrcTauri fill:#667eea,stroke:#764ba2,color:#fff
    style Commands fill:#4facfe,stroke:#00f2fe,color:#fff
    style WinMgr fill:#4facfe,stroke:#00f2fe,color:#fff
    style Tray fill:#4facfe,stroke:#00f2fe,color:#fff
    style Utils fill:#4facfe,stroke:#00f2fe,color:#fff
    style Applets fill:#4facfe,stroke:#00f2fe,color:#fff
    style WinApps fill:#4facfe,stroke:#00f2fe,color:#fff
    style AudioRs fill:#43e97b,stroke:#38f9d7,color:#fff
    style BrightRs fill:#feca57,stroke:#ff9a56,color:#fff
    style BTRs fill:#f093fb,stroke:#f5576c,color:#fff
    style NetRs fill:#fa709a,stroke:#f5576c,color:#fff
    style NotifRs fill:#43e97b,stroke:#38f9d7,color:#fff
    style DBusRs fill:#f093fb,stroke:#f5576c,color:#fff

</div>

<h2 id="patrones-de-diseÃ±o">Patrones de DiseÃ±o</h2>
<h3 id="1-mvc-model-view-controller">1. MVC (Model-View-Controller)</h3>
<p><strong>Frontend</strong>:</p>
<ul>
<li><strong>Model</strong>: Pinia stores</li>
<li><strong>View</strong>: Vue components</li>
<li><strong>Controller</strong>: MÃ©todos en componentes</li>
</ul>
<p><strong>Backend</strong>:</p>
<ul>
<li><strong>Model</strong>: Estructuras en <code>structs.rs</code></li>
<li><strong>Controller</strong>: Funciones en <code>commands/</code></li>
<li><strong>Business Logic</strong>: MÃ³dulos especializados</li>
</ul>
<h3 id="2-pub-sub-publicar-suscribirse">2. Pub-Sub (Publicar-Suscribirse)</h3>
<p>Para eventos del sistema:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="c1">// Backend: Emitir evento
</span></span></span><span class="line"><span class="cl"><span class="n">window</span><span class="p">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#34;audio_volume_changed&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">level</span>: <span class="mi">50</span><span class="p">})</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// Frontend: Escuchar evento
</span></span></span><span class="line"><span class="cl"><span class="nx">onMounted</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">listen</span><span class="p">(</span><span class="s1">&#39;audio_volume_changed&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">state</span><span class="p">.</span><span class="nx">volume</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">payload</span><span class="p">.</span><span class="nx">level</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="3-service-layer">3. Service Layer</h3>
<p>Cada funcionalidad tiene su capa de servicio:</p>
<ul>
<li><code>audio.rs</code> - Servicio de audio</li>
<li><code>network.rs</code> - Servicio de red</li>
<li><code>bluetooth.rs</code> - Servicio de Bluetooth</li>
</ul>
<h2 id="flujos-de-informaciÃ³n">Flujos de InformaciÃ³n</h2>
<h3 id="comando-frontend--backend">Comando (Frontend â†’ Backend)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// Frontend
</span></span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">invoke</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@tauri-apps/api/tauri&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">invoke</span><span class="p">(</span><span class="s1">&#39;set_brightness&#39;</span><span class="p">,</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">  <span class="nx">level</span>: <span class="kt">75</span> 
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="c1">// Backend
</span></span></span><span class="line"><span class="cl"><span class="cp">#[tauri::command]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">set_brightness</span><span class="p">(</span><span class="n">level</span>: <span class="kt">u32</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="nb">String</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">brightness</span>::<span class="n">set_level</span><span class="p">(</span><span class="n">level</span><span class="p">)</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="evento-backend--frontend">Evento (Backend â†’ Frontend)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="c1">// Backend
</span></span></span><span class="line"><span class="cl"><span class="n">window</span><span class="p">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#34;brightness_changed&#34;</span><span class="p">,</span><span class="w"> </span><span class="fm">json!</span><span class="p">({</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s">&#34;level&#34;</span>: <span class="mi">75</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}))</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// Frontend
</span></span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">listen</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@tauri-apps/api/event&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">listen</span><span class="p">(</span><span class="s1">&#39;brightness_changed&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Brillo:&#39;</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">payload</span><span class="p">.</span><span class="nx">level</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="configuraciÃ³n-y-manifiestos">ConfiguraciÃ³n y Manifiestos</h2>
<h3 id="tauriconfjson"><code>tauri.conf.json</code></h3>
<p>Define permisos y configuraciÃ³n de Tauri:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;beforeDevCommand&#34;</span><span class="p">:</span> <span class="s2">&#34;bun run dev&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;devUrl&#34;</span><span class="p">:</span> <span class="s2">&#34;http://localhost:5173&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;app&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;windows&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;Vasak Desktop&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;label&#34;</span><span class="p">:</span> <span class="s2">&#34;main&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;width&#34;</span><span class="p">:</span> <span class="mi">1024</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;height&#34;</span><span class="p">:</span> <span class="mi">768</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="cargotoml"><code>Cargo.toml</code></h3>
<p>Dependencias y configuraciÃ³n de Rust.</p>
<h3 id="tsconfigjson"><code>tsconfig.json</code></h3>
<p>ConfiguraciÃ³n de TypeScript.</p>
<h3 id="viteconfigts"><code>vite.config.ts</code></h3>
<p>ConfiguraciÃ³n de build del frontend.</p>

        </div>

        
        <div class="flex justify-between mt-8 gap-4">
          
          
          
          
          
            
          
            
          
            
          
            
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          

          
          
            
            <a href="https://os.vasak.net.ar/docs/devs/vasak-desktop/dependencies/" class="flex-1 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-vsk1 hover:text-white dark:hover:bg-vsk1 transition-colors">
              <div class="text-sm text-gray-500 dark:text-gray-400 mb-1">â† Anterior</div>
              <div class="font-semibold">Gestion de dependencias | vasak-desktop</div>
            </a>
          

          
          
            
            <a href="https://os.vasak.net.ar/docs/devs/vasak-desktop/folders/" class="flex-1 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-vsk1 hover:text-white dark:hover:bg-vsk1 transition-colors text-right">
              <div class="text-sm text-gray-500 dark:text-gray-400 mb-1">Siguiente â†’</div>
              <div class="font-semibold">Sistema de Carpetas | vasak-desktop</div>
            </a>
          
        </div>
      </div>
    </div>

    <div class="hidden w-4/12 mx-8 lg:block">
      <section class="bg-white dark:bg-gray-800 rounded-xl p-5 mb-3">
	<header class="flex items-center gap-2 mb-4">
		<i class="fa-solid fa-magnifying-glass"></i>
		<div>
			<h2 class="text-base font-semibold">Buscar documentaciÃ³n</h2>
		</div>
	</header>

	<div class="relative">
		<input
			id="docs-search-input"
			type="search"
			placeholder="Ej: eventos IPC, Vue, Tauri"
			class="w-full rounded-xl bg-slate-50 dark:bg-slate-800 px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
			autocomplete="off"
		/>
		<span id="docs-search-status" class="absolute right-3 top-1/2 -translate-y-1/2 text-xs text-slate-400"></span>
	</div>
</section>


<div id="docs-search-modal" class="fixed inset-0 z-50 hidden">
	
	<div id="docs-search-backdrop" class="absolute inset-0 bg-black/30 backdrop-blur-sm opacity-0 transition-opacity duration-200"></div>
	
	
	<div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-11/12 max-w-2xl max-h-[75vh]">
		<div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl overflow-hidden flex flex-col">
			
			<div class="px-6 py-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between">
				<div class="flex items-center gap-2">
					<i class="fa-solid fa-magnifying-glass text-slate-500"></i>
					<h3 class="font-semibold text-slate-800 dark:text-slate-100">Resultados de bÃºsqueda</h3>
				</div>
				<button id="docs-search-close" type="button" class="text-slate-400 hover:text-vsk1 transition-colors">
					<i class="fa-solid fa-xmark text-lg"></i>
				</button>
			</div>
			
			
			<div id="docs-search-results" class="overflow-y-auto p-4 space-y-3 text-sm"></div>
		</div>
	</div>
</div>

<script>
(() => {
	const input = document.getElementById('docs-search-input');
	const statusEl = document.getElementById('docs-search-status');
	const resultsEl = document.getElementById('docs-search-results');
	const modal = document.getElementById('docs-search-modal');
	const backdrop = document.getElementById('docs-search-backdrop');
	const closeBtn = document.getElementById('docs-search-close');
	const endpoint = '/index.json';
	const MIN_CHARS = 2;
	let index = null;

	const showModal = () => {
		modal.classList.remove('hidden');
		setTimeout(() => backdrop.classList.remove('opacity-0'), 10);
	};

	const hideModal = () => {
		backdrop.classList.add('opacity-0');
		setTimeout(() => modal.classList.add('hidden'), 200);
	};

	const fetchIndex = async () => {
		if (index) return index;
		statusEl.textContent = 'Cargandoâ€¦';
		const res = await fetch(endpoint);
		const data = await res.json();
		
		index = (data || []).filter(item => {
			const rel = item.RelPermalink || item.relpermalink || '';
			const url = item.Permalink || item.permalink || '';
			return rel.startsWith('/docs/') || url.includes('/docs/');
		}).map(item => ({
			title: item.title || item.Title || '',
			content: item.content || item.Content || '',
			summary: item.summary || item.Summary || '',
			permalink: item.Permalink || item.permalink || item.RelPermalink || item.relpermalink || '#',
		}));
		statusEl.textContent = '';
		return index;
	};

	const debounce = (fn, delay = 200) => {
		let t; return (...args) => { clearTimeout(t); t = setTimeout(() => fn(...args), delay); };
	};

	const score = (item, q) => {
		const qi = q.toLowerCase();
		let s = 0;
		const title = (item.title || '').toLowerCase();
		const content = (item.content || '').toLowerCase();
		if (title.includes(qi)) s += 6; 
		if (content.includes(qi)) s += 4;
		return s;
	};

	const highlight = (text, q) => {
		if (!text) return '';
		try {
			const re = new RegExp(`(${q.replace(/[.*+?^${}()|[\\]\\]/g, '\\$&')})`, 'ig');
			return text.replace(re, '<mark class="bg-vsk1 p-0 m-0">$1</mark>');
		} catch {
			return text;
		}
	};

	const snippet = (content, q, length = 160) => {
		const plain = (content || '').replace(/<[^>]+>/g, ' ');
		const idx = plain.toLowerCase().indexOf(q.toLowerCase());
		if (idx === -1) return plain.slice(0, length) + (plain.length > length ? 'â€¦' : '');
		const start = Math.max(0, idx - 40);
		const end = Math.min(plain.length, idx + length);
		return (start > 0 ? 'â€¦' : '') + plain.slice(start, end) + (end < plain.length ? 'â€¦' : '');
	};

	const renderResults = (items, q) => {
		if (!items.length) {
			resultsEl.innerHTML = '<p class="text-center text-slate-500 dark:text-slate-400 py-8">Sin resultados</p>';
			return;
		}
		resultsEl.innerHTML = items.map(item => `
			<article class= rounded-xl p-4 hover:bg-vsk1 transition-colors">
				<a href="${item.permalink}" class="text-sm font-semibold text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-2">
					<i class="fa-solid fa-file-lines text-slate-500"></i>
					${highlight(item.title, q)}
				</a>
				<p class="mt-2 text-slate-600 dark:text-slate-300 leading-relaxed text-xs">${highlight(snippet(item.content || item.summary, q), q)}</p>
			</article>
		`).join('');
	};

	const onSearch = debounce(async () => {
		const q = input.value.trim();
		if (q.length < MIN_CHARS) {
			if (q.length === 0) {
				hideModal();
			} else {
				showModal();
				resultsEl.innerHTML = '<p class="text-center text-slate-500 dark:text-slate-400 py-8">Escribe al menos 2 caracteres</p>';
			}
			statusEl.textContent = '';
			return;
		}
		await fetchIndex();
		const matches = index
			.map(item => ({ ...item, _score: score(item, q) }))
			.filter(item => item._score > 0)
			.sort((a, b) => b._score - a._score)
			.slice(0, 20);
		statusEl.textContent = matches.length ? `${matches.length}` : '0';
		showModal();
		renderResults(matches, q);
	}, 220);

	
	input.addEventListener('input', onSearch);
	closeBtn.addEventListener('click', hideModal);
	backdrop.addEventListener('click', hideModal);
	
	
	document.addEventListener('keydown', (e) => {
		if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
			hideModal();
		}
	});
})();
</script>
<div
  class="flex flex-col mb-3 px-6 py-4 mx-auto bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-200 rounded-xl shadow-md">
  <nav id="TableOfContents">
  <ol>
    <li><a href="#quÃ©-es-vasak-desktop">Â¿QuÃ© es Vasak Desktop?</a></li>
    <li><a href="#arquitectura-de-alto-nivel">Arquitectura de Alto Nivel</a></li>
    <li><a href="#ventanas-de-la-aplicaciÃ³n">Ventanas de la AplicaciÃ³n</a>
      <ol>
        <li><a href="#ventana-1-panel-top-bar">Ventana 1: Panel (Top Bar)</a></li>
        <li><a href="#ventana-2-desktop-background">Ventana 2: Desktop (Background)</a></li>
      </ol>
    </li>
    <li><a href="#capas-de-la-aplicaciÃ³n">Capas de la AplicaciÃ³n</a>
      <ol>
        <li><a href="#1-capa-de-presentaciÃ³n-frontend">1. Capa de PresentaciÃ³n (Frontend)</a></li>
        <li><a href="#2-capa-de-comunicaciÃ³n-ipc">2. Capa de ComunicaciÃ³n (IPC)</a></li>
        <li><a href="#3-capa-de-lÃ³gica-backend">3. Capa de LÃ³gica (Backend)</a></li>
        <li><a href="#4-capa-de-integraciÃ³n-del-sistema-d-bus">4. Capa de IntegraciÃ³n del Sistema (D-Bus)</a></li>
        <li><a href="#5-capa-de-hardwareso">5. Capa de Hardware/SO</a></li>
      </ol>
    </li>
    <li><a href="#flujo-de-datos-tÃ­pico">Flujo de Datos TÃ­pico</a>
      <ol>
        <li><a href="#ejemplo-cambiar-volumen">Ejemplo: Cambiar Volumen</a></li>
      </ol>
    </li>
    <li><a href="#estructura-de-directorios">Estructura de Directorios</a>
      <ol>
        <li><a href="#frontend-src">Frontend (<code>src/</code>)</a></li>
        <li><a href="#backend-src-taurisrc">Backend (<code>src-tauri/src/</code>)</a></li>
      </ol>
    </li>
    <li><a href="#patrones-de-diseÃ±o">Patrones de DiseÃ±o</a>
      <ol>
        <li><a href="#1-mvc-model-view-controller">1. MVC (Model-View-Controller)</a></li>
        <li><a href="#2-pub-sub-publicar-suscribirse">2. Pub-Sub (Publicar-Suscribirse)</a></li>
        <li><a href="#3-service-layer">3. Service Layer</a></li>
      </ol>
    </li>
    <li><a href="#flujos-de-informaciÃ³n">Flujos de InformaciÃ³n</a>
      <ol>
        <li><a href="#comando-frontend--backend">Comando (Frontend â†’ Backend)</a></li>
        <li><a href="#evento-backend--frontend">Evento (Backend â†’ Frontend)</a></li>
      </ol>
    </li>
    <li><a href="#configuraciÃ³n-y-manifiestos">ConfiguraciÃ³n y Manifiestos</a>
      <ol>
        <li><a href="#tauriconfjson"><code>tauri.conf.json</code></a></li>
        <li><a href="#cargotoml"><code>Cargo.toml</code></a></li>
        <li><a href="#tsconfigjson"><code>tsconfig.json</code></a></li>
        <li><a href="#viteconfigts"><code>vite.config.ts</code></a></li>
      </ol>
    </li>
  </ol>
</nav>
</div></div>

  </div>
</main>

<div class="flex flex-col mx-3 mt-3 bg-white dark:bg-gray-800 rounded-xl">
  <div class="w-full draggable">
    <div class="container flex flex-col mx-auto">
      <div class="flex flex-col items-center w-full my-20">
        <span class="mb-8">
          <img src="https://os.vasak.net.ar/img/logo.svg" alt="logo" loading="lazy" class="h-20" />
        </span>
        <div class="flex flex-col items-center gap-6">
          <div
            class="flex flex-wrap items-center justify-center gap-5 lg:gap-12 gap-y-3 lg:flex-nowrap text-dark-grey-900">
            <a href="https://vasak.net.ar/" rel="noopener" target="_blank" class="text-gray-500 hover:text-vsk1">Desarrollo de Software</a>
            <a href="https://os.vasak.net.ar/privacy/" class="text-gray-500 hover:text-vsk1">Privacy policy</a>
            <a href="https://os.vasak.net.ar/terms/" class="text-gray-500 hover:text-vsk1">Terms of service</a>
            <a href="https://os.vasak.net.ar/changelogs/" class="text-gray-500 hover:text-vsk1">Changelogs</a>
          </div>
          <div class="flex items-center gap-8">
            
            <a href="https://t.me/VasakOS" alt="Comunidad Telegram" aria-label="Comunidad Telegram" target="_blank"
              class="text-vsk1 hover:text-vsk2">
              <em class="fab fa-telegram"></em>
            </a>
            
            <a href="https://twitter.com/VasakOSLinux" alt="Twitter" aria-label="Twitter" target="_blank"
              class="text-vsk1 hover:text-vsk2">
              <em class="fab fa-twitter"></em>
            </a>
            
            <a href="https://github.com/Vasak-OS" alt="GitHub" aria-label="GitHub" target="_blank"
              class="text-vsk1 hover:text-vsk2">
              <em class="fab fa-github"></em>
            </a>
            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="flex flex-wrap my-5">
  <div class="w-full max-w-full sm:w-3/4 mx-auto text-center">
    <p class="text-lg text-slate-500 py-1"><a href="https://os.vasak.net.ar/"
        class="router-link-active router-link-exact-active text-transparent bg-clip-text bg-gradient-to-br from-vsk2 to-vsk1 family-vsk font-bold"
        rel="nofollow" aria-current="page">Vasak group</a> Â© Todos los derechos reservados</p>
  </div>
</div>

<a rel="noopener" href="#" class="bg-gradient-to-br text-white from-vsk2 to-vsk1 fixed bottom-2 right-2 z-30 flex justify-center items-center aspect-square h-12 w-12 rounded-xl hover:text-white text-xl">
  <em class="fas fa-arrow-up"></em>
</a>




<script>
document.addEventListener('DOMContentLoaded', function() {
  
  if (typeof mermaid !== 'undefined') {
    mermaid.initialize({ 
      startOnLoad: true, 
      theme: 'default', 
      securityLevel: 'loose',
      flowchart: {
        useMaxWidth: true,
        htmlLabels: true,
        curve: 'cardinal'
      },
      sequenceDiagram: {
        useMaxWidth: true,
        diagramMarginX: 50,
        diagramMarginY: 10
      },
      blockDiagram: {
        useMaxWidth: true
      }
    });
    
    
    const codeTags = document.querySelectorAll('pre > code.language-mermaid');
    codeTags.forEach(function(tag) {
      const preTag = tag.parentElement;
      const mermaidContent = tag.textContent;
      
      
      const mermaidDiv = document.createElement('div');
      mermaidDiv.className = 'mermaid';
      mermaidDiv.textContent = mermaidContent;
      
      
      preTag.parentNode.replaceChild(mermaidDiv, preTag);
    });
    
    
    mermaid.contentLoaded();
  }
  
  
  const htmlElement = document.documentElement;
  const observerOptions = {
    attributes: true,
    attributeFilter: ['class']
  };
  
  const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.attributeName === 'class') {
        const isDark = htmlElement.classList.contains('dark');
        const theme = isDark ? 'dark' : 'default';
        
        if (typeof mermaid !== 'undefined') {
          mermaid.initialize({ 
            startOnLoad: true, 
            theme: theme, 
            securityLevel: 'loose'
          });
          mermaid.contentLoaded();
        }
      }
    });
  });
  
  observer.observe(htmlElement, observerOptions);
});
</script>










<script async src="https://os.vasak.net.ar/js/bundle.min.abd2670efd3308c41632004c120afcbfb6eb712cc6b23cbb48e8b4a91ccbe871.js"></script>


<script async src="https://os.vasak.net.ar/mermaid.min_3141953029634099501.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    mermaid.initialize({ startOnLoad: true, theme: 'default', securityLevel: 'loose' });
    mermaid.contentLoaded();
  });
  
  
  const darkModeToggle = document.querySelector('[data-dark-mode]');
  if (darkModeToggle) {
    darkModeToggle.addEventListener('click', function() {
      setTimeout(() => {
        const isDark = document.documentElement.classList.contains('dark');
        const theme = isDark ? 'dark' : 'default';
        mermaid.initialize({ startOnLoad: true, theme: theme, securityLevel: 'loose' });
        
        mermaid.contentLoaded();
      }, 100);
    });
  }
</script></body>

</html>